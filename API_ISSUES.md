# Проблемы с API в n8n

## Обнаруженные проблемы

В ходе тестирования бота были выявлены проблемы с доступом к некоторым вебхукам n8n. 

### Недоступные вебхуки:

- `https://n8n2.supashkola.ru/webhook/my_models` - возвращает ошибку 404 "The requested webhook 'POST my_models' is not registered"
- `https://n8n2.supashkola.ru/webhook/my_credits` - возвращает ошибку 404 "The requested webhook 'POST my_credits' is not registered"

### Работающие вебхуки:
- `https://n8n2.supashkola.ru/webhook/start_finetune` - работает корректно (HTTP 200)

## Влияние на функциональность бота:

1. Невозможно получить список моделей пользователя
2. Невозможно проверить количество кредитов пользователя
3. Нарушена логика выбора кнопок в интерфейсе (кнопка "Start from scratch" должна отображаться только если у пользователя нет моделей)
4. Нарушена логика генерации изображений (автовыбор последней модели невозможен)

## Технические детали:

Все запросы делаются с правильными параметрами:
```json
{"telegram_id": USER_ID}
```

Ошибка регистрируется в логах:
```
2025-04-12 06:22:25 | ERROR | handlers.callback_handlers:_handle_cmd_generate:344 - Ошибка при получении моделей через API: 404
```

## Возможные решения:

1. Активировать рабочие процессы (workflows) в n8n для вебхуков `my_models` и `my_credits`
2. Предоставить новые эндпоинты для получения этих данных
3. Создать временную заглушку в боте, чтобы он мог функционировать без этих данных

## Дополнительная информация:

Благодаря недавним улучшениям логирования, бот теперь регистрирует подробную информацию о запросах и ответах API, что позволит легче отлаживать подобные проблемы в будущем. 