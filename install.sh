#!/bin/bash

# Скрипт для установки виртуального окружения и зависимостей

# Проверяем наличие Python
if ! command -v python3 &> /dev/null; then
    echo "Python 3 не найден. Пожалуйста, установите Python 3."
    exit 1
fi

# Создаем виртуальное окружение, если его нет
if [ ! -d "venv" ]; then
    echo "Создаем виртуальное окружение..."
    python3 -m venv venv
fi

# Активируем виртуальное окружение
echo "Активируем виртуальное окружение..."
source venv/bin/activate

# Устанавливаем зависимости
echo "Устанавливаем зависимости..."
pip install -r requirements.txt

# Проверяем наличие файла .env
if [ ! -f ".env" ]; then
    echo "Файл .env не найден. Создаем из .env.example..."
    cp .env.example .env
    echo "Пожалуйста, отредактируйте файл .env, добавив необходимые токены и URL."
fi

# Создаем директорию для логов
echo "Создаем директорию для логов..."
mkdir -p logs

echo "Установка завершена!"
echo "Для запуска бота используйте: ./setup.sh"
echo "Для запуска локального сервера используйте: ./run_local_server.py"
echo "Для тестирования API используйте: ./test_api.py"
